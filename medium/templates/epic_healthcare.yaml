# Epic Healthcare Template
# Simulates an Epic EHR production server

metadata:
  name: "Epic Healthcare"
  description: "Simulates an Epic EHR production server for healthcare environments"
  category: "healthcare"
  version: "1.0"
  author: "HoneyMesh"

configuration:
  hostname: "epic-prd-web01.mercy-health.org"
  ssh_banner: "SSH-2.0-OpenSSH_8.4p1 Ubuntu-5ubuntu1.3"
  timezone: "US/Eastern"

users:
  epicadmin:
    password: "Epic2024!"
    uid: 1001
    gid: 1001
    home: "/home/epicadmin"
    shell: "/bin/bash"
    gecos: "Epic Administrator"
  
  jsmith_md:
    password: "Doctor123"
    uid: 1002
    gid: 1002
    home: "/home/jsmith_md"
    shell: "/bin/bash"
    gecos: "Dr. John Smith"
  
  rnurse1:
    password: "Nurse2024!"
    uid: 1003
    gid: 1003
    home: "/home/rnurse1"
    shell: "/bin/bash"
    gecos: "Kelly Nurse RN"
  
  sysadmin:
    password: "Admin123"
    uid: 1004
    gid: 1004
    home: "/home/sysadmin"
    shell: "/bin/bash"
    gecos: "System Administrator"
  
  dbadmin:
    password: "Oracle2024"
    uid: 1005
    gid: 1005
    home: "/home/dbadmin"
    shell: "/bin/bash"
    gecos: "Database Administrator"

filesystem:
  # Standard Linux directories
  proc: {}
  sys: {}
  dev: {}
  run: {}
  tmp: {}
  
  usr:
    bin: {}
    sbin: {}
    local:
      bin: {}
      sbin: {}
  
  sbin: {}
  lib: {}
  bin: {}
  
  etc:
    epic: {}
    oracle: {}
    apache2: {}
    ssl:
      certs: {}
      private: {}
  
  var:
    log:
      epic: {}
      oracle: {}
      apache2: {}
    epic:
      data:
        patient: {}
        provider: {}
        clinical: {}
        billing: {}
      logs: {}
      backup: {}
      temp: {}
  
  opt:
    epic:
      bin: {}
      lib: {}
      config: {}
      templates: {}
  
  home:
    epicadmin:
      .ssh: {}
    jsmith_md:
      .ssh: {}
    rnurse1:
      .ssh: {}
    sysadmin:
      .ssh: {}
    dbadmin:
      .ssh: {}
  
  root:
    .ssh: {}
  
  # Epic-specific application directories
  epic:
    chronicles:
      live: {}
      backup: {}
      archive: {}
      reports: {}
    hyperspace:
      cache: {}
      temp: {}
      logs: {}
    interconnect:
      hl7:
        inbound: {}
        outbound: {}
      fhir: {}
      cda: {}
    cadence: {}
    clarity: {}
    cogito: {}
    logs:
      audit: {}
      system: {}
      error: {}
      access: {}
  
  srv:
    epic:
      web: {}
      api: {}

files:
  /etc/hostname:
    content: "epic-prd-web01.mercy-health.org"
  
  /etc/motd:
    content: |
      ================================================================================
                               MERCY HEALTH SYSTEM
                          EPIC PRODUCTION ENVIRONMENT
      ================================================================================
      
      WARNING: This system is for authorized personnel only. Unauthorized access 
      is strictly prohibited and will be prosecuted to the full extent of the law.
      
      All user activities on this system are monitored and logged in accordance 
      with HIPAA regulations and organizational security policies.
      
      System Information:
        Hostname: epic-prd-web01.mercy-health.org
        Environment: PRODUCTION
        Database: EPICPRD (Oracle 19c)
        Last System Maintenance: September 8, 2024 02:00 EST
      
      IMPORTANT NOTICES:
      - Epic Chronicles Build 2023.1.15.789 is currently active
      - Scheduled maintenance window: Sunday 01:00-04:00 EST
      - Patient data access requires proper authorization and documentation
      - Report security incidents immediately to IT Security: ext. 4911
      
      For technical support:
        Epic Support: ext. 4357
        IT Help Desk: ext. 4400
        Emergency: ext. 911
      
      ================================================================================
                          Mercy Health System - Committed to Excellence
      ================================================================================
  
  /epic/epic.cfg:
    content: |
      # Epic Production Configuration - Mercy Health System
      [database]
      host=epic-oracle-prd.mercy-health.org
      port=1521
      service_name=EPICPRD
      max_connections=500
      connection_timeout=30
      
      [interfaces]
      hl7_port=7700
      fhir_port=8080
      web_port=443
      interconnect_port=9200
      
      [security]
      encryption=AES256
      audit_trail=enabled
      hipaa_logging=enabled
      session_timeout=1800
      
      [backup]
      daily_backup=02:00
      weekly_backup=sunday_01:00
      retention_days=2557
      backup_location=/var/epic/backup
      
      [logging]
      level=INFO
      audit_level=DEBUG
      max_log_size=100MB
      log_rotation=daily
  
  /epic/chronicles/live/patient_census.dat:
    content: |
      MERCY HEALTH SYSTEM - CURRENT PATIENT CENSUS
      Generated: 2024-09-11 08:30:15
      
      MRN: 445667891 | DOB: 1965-03-15 | Name: Johnson, Robert M
      Room: ICU-204 | Provider: Dr. Sarah Chen | Status: Critical
      Diagnosis: Acute Myocardial Infarction, Diabetes Type 2
      Admission: 2024-09-09 14:30
      
      MRN: 445623451 | DOB: 1978-11-22 | Name: Williams, Jennifer L  
      Room: 3West-312 | Provider: Dr. Michael Rodriguez | Status: Stable
      Diagnosis: Community Acquired Pneumonia, Hypertension
      Admission: 2024-09-10 22:15
      
      MRN: 445789123 | DOB: 1952-07-08 | Name: Davis, Margaret K
      Room: 2East-205 | Provider: Dr. Lisa Park | Status: Post-Op Day 1
      Diagnosis: Hip Fracture s/p ORIF, Osteoporosis
      Admission: 2024-09-10 06:45
      
      MRN: 445712456 | DOB: 1988-04-30 | Name: Martinez, Carlos R
      Room: 4North-408 | Provider: Dr. James Wilson | Status: Stable
      Diagnosis: Appendicitis s/p Appendectomy
      Admission: 2024-09-11 01:15
      
      Total Active Patients: 96
      Total Capacity: 117
      Occupancy Rate: 82%
      Average Length of Stay: 4.2 days
  
  /epic/interconnect/hl7/messages.log:
    content: |
      2024-09-11 08:15:23 [ADT] MSH|^~\&|EPIC|MERCY|REGISTRATION|MERCY|20240911081523||ADT^A01|MSG001|P|2.5
      2024-09-11 08:16:45 [LAB] MSH|^~\&|EPIC|MERCY|LABCORP|MERCY|20240911081645||ORU^R01|MSG002|P|2.5
      2024-09-11 08:17:12 [RAD] MSH|^~\&|EPIC|MERCY|RADIOLOGY|MERCY|20240911081712||ORU^R01|MSG003|P|2.5
      2024-09-11 08:18:33 [ADT] MSH|^~\&|EPIC|MERCY|REGISTRATION|MERCY|20240911081833||ADT^A03|MSG004|P|2.5
      2024-09-11 08:19:55 [ORM] MSH|^~\&|EPIC|MERCY|PHARMACY|MERCY|20240911081955||ORM^O01|MSG005|P|2.5
      2024-09-11 08:21:14 [LAB] MSH|^~\&|EPIC|MERCY|LABCORP|MERCY|20240911082114||ORU^R01|MSG006|P|2.5
  
  /epic/logs/audit/hipaa_audit.log:
    content: |
      2024-09-11 08:25:14 [HIPAA_ACCESS] User: jsmith_md accessed patient MRN 445667891 - Johnson, Robert M
      2024-09-11 08:26:33 [ADMIN] User: epicadmin modified user permissions for rnurse1
      2024-09-11 08:27:15 [SYSTEM] Chronicles backup completed - 2.3GB archived to /var/epic/backup/
      2024-09-11 08:28:45 [SECURITY] Failed login attempt from IP 192.168.1.45 - username: admin
      2024-09-11 08:30:22 [HIPAA_ACCESS] User: rnurse1 accessed patient MRN 445623451 - Williams, Jennifer L
      2024-09-11 08:31:45 [SYSTEM] Hyperspace cache cleared - 1.2GB freed
      2024-09-11 08:33:12 [HIPAA_ACCESS] User: jsmith_md modified patient record MRN 445667891
      2024-09-11 08:35:50 [SECURITY] Successful login from IP 10.0.5.23 - username: epicadmin
  
  /epic/logs/system/epic_system.log:
    content: |
      2024-09-11 08:00:00 [INFO] Daily system health check completed - All services operational
      2024-09-11 08:15:23 [INFO] Interface Engine: HL7 message processed - ADT^A01
      2024-09-11 08:30:45 [WARN] Memory usage high: 78% (62GB/80GB) - Monitor closely
      2024-09-11 08:45:12 [INFO] Chronicles database connection pool: 145/500 active connections
      2024-09-11 09:00:00 [INFO] Hourly statistics: 1,245 patient logins, 2,891 transactions
  
  /var/epic/data/clinical/recent_notes.txt:
    content: |
      Clinical Notes Summary - Last 24 Hours
      Generated: 2024-09-11 08:00:00
      
      Total Notes: 347
      Physician Notes: 156
      Nursing Notes: 191
      
      High Priority Alerts: 12
      Critical Lab Values: 8
      Medication Orders: 234
      
      System Performance: Normal
      Average Note Save Time: 0.8 seconds
  
  /opt/epic/config/database.conf:
    content: |
      # Epic Database Configuration
      [connection]
      primary_host=epic-oracle-prd01.internal
      standby_host=epic-oracle-prd02.internal
      port=1521
      service_name=EPICPRD
      
      [pool]
      min_connections=50
      max_connections=500
      connection_timeout=30
      idle_timeout=300
      
      [performance]
      statement_cache_size=250
      prefetch_rows=100
      array_size=50

custom_commands:
  epic-status:
    path: "/usr/local/bin/epic-status"
    content: |
      #!/bin/bash
      cat << 'EOL'
      Epic System Status Report
      Generated: September 11, 2024 14:45:32 EST
      Server: epic-prd-web01.mercy-health.org
      
      === EPIC SERVICES ===
      Chronicles Database    : RUNNING (PID: 456)
      Hyperspace Web        : RUNNING (PID: 567)
      MyChart Portal        : RUNNING (PID: 789)
      Interface Engine      : RUNNING (PID: 678)
      Interconnect Services : RUNNING (PID: 890)
      
      === DATABASE STATUS ===
      Primary Database      : ONLINE
      - Size: 2.8TB
      - Last Backup: 2024-09-10 02:00:00
      - Active Connections: 145/500
      - Response Time: 12ms avg
      
      === INTERFACE STATUS ===
      HL7 Inbound          : 12 active connections
      HL7 Outbound         : 8 active connections
      FHIR API             : OPERATIONAL
      Lab Interfaces       : 4/4 CONNECTED
      Radiology Interface  : CONNECTED
      Pharmacy Interface   : CONNECTED
      
      === SYSTEM RESOURCES ===
      CPU Usage            : 68%
      Memory Usage         : 78% (62GB/80GB)
      Disk Usage           : /epic 79% full (2.1TB/2.7TB)
      Network Traffic      : 245 Mbps
      
      === RECENT ALERTS ===
      [INFO] Daily backup completed successfully
      [WARN] High memory usage - monitor closely
      [INFO] 1,245 patient logins in last hour
      [INFO] Interface engine processing normally
      EOL
  
  epic-backup:
    path: "/usr/local/bin/epic-backup"
    content: |
      #!/bin/bash
      echo "Epic Backup Utility v2.3"
      echo "========================"
      echo ""
      echo "Last Successful Backup: 2024-09-10 02:00:00"
      echo "Backup Location: /var/epic/backup/"
      echo "Backup Size: 2.3GB"
      echo ""
      echo "Next Scheduled Backup: 2024-09-12 02:00:00"
      echo ""
      echo "Available Backup Sets:"
      echo "  - epicprd_20240910_020000.bak (2.3GB)"
      echo "  - epicprd_20240909_020000.bak (2.2GB)"
      echo "  - epicprd_20240908_020000.bak (2.2GB)"
      echo ""
      echo "Retention Policy: 2557 days"
  
  epic-users:
    path: "/usr/local/bin/epic-users"
    content: |
      #!/bin/bash
      echo "Epic Active Users"
      echo "================="
      echo ""
      echo "Currently Logged In: 247 users"
      echo ""
      echo "User Type Breakdown:"
      echo "  Physicians:        89"
      echo "  Nurses:           124"
      echo "  Administrators:    18"
      echo "  Technicians:       16"
      echo ""
      echo "Active Sessions by Department:"
      echo "  Emergency Dept:    45"
      echo "  ICU:              32"
      echo "  Surgery:          28"
      echo "  Medical/Surgical:  67"
      echo "  Outpatient:       75"
